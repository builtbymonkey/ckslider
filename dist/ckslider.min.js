/*! ckSlider - v0.2.0 - 2013-06-21
* https://github.com/ckimrie/ckslider
* Copyright (c) 2013 Christopher Imrie; Licensed MIT */
(function(){var t={fadeInDuration:800,slideDuration:800,delay:5e3,start:1,transition:"fade",autoplay:!0,interactionDisablesAutoplay:!0,preloadImages:!0,slideInactiveOpacity:.5,inactiveZIndex:1,zIndexLayer1:5,zIndexLayer2:10,zIndexLayer3:15,pauseOnClick:!0,hideInactiveSlides:!0,legacyIEMode:jQuery("html").is(".ie6, .ie7, .ie8"),height:null,width:null,loadingClass:"loading",slideActiveClass:"active",slideClass:"slide",indicatorActiveClass:"active",slideIndicatorWrapper:".counter",slideIndicatorElement:"a",nextBtn:".next",prevBtn:".previous",direction:"forward",onStart:function(){},onBeforeTransition:function(){},onAfterTransition:function(){},onPause:function(){}},i={DIRECTION_FORWARD:"forward",DIRECTION_REVERSE:"reverse"},e=function(i,e){this.options=jQuery.extend({},t,e||{}),this.$container=jQuery(i).eq(0),this.$slides=this.$container.find("."+this.options.slideClass),this.$indicatorContainer=this.$container.find(this.options.slideIndicatorWrapper),this.$indicators=this.$indicatorContainer.find(this.options.slideIndicatorElement),this.$nextBtn=this.$container.find(this.options.nextBtn),this.$prevBtn=this.$container.find(this.options.prevBtn),this.slideCount=this.$slides.length,this.current=this.options.start>0&&this.options.start<this.$slides.length?this.options.start-1:0,this.nextKey=null,this.autoplayTimeout=null,this.direction=this.options.direction,this.animationLock=!1,this.init()};e.prototype={init:function(){this.measureContainerDimensions(),this.setInitialSlidePresentation(),this.bindEvents(),this.trigger("ms.start")},setInitialSlidePresentation:function(){var t=this;if(this.$container.addClass(this.options.loadingClass).css({height:this.height,position:"relative"}),this.$slides.each(function(i){i!==t.current&&t.options.hideInactiveSlides?jQuery(this).hide():jQuery(this).show(),jQuery(this).css({position:"absolute",height:t.height,width:"100%"})}),this.$indicatorContainer.css({zIndex:this.options.zIndexLayer3}),"slide"===this.options.transition){var i=this.getPrevSlide(),e=this.getNextSlide();i.css({zIndex:this.options.zIndexLayer1,left:-1*this.width}).fadeTo(this.options.slideDuration,this.options.slideInactiveOpacity),e.hide().css({zIndex:this.options.zIndexLayer2,left:this.width}).fadeTo(this.options.slideDuration,this.options.slideInactiveOpacity)}this.highlightIndicator(this.getCurrentKey())},measureContainerDimensions:function(){this.width=null!==this.options.width?this.options.width:this.$container.width(),this.height=null!==this.options.height?this.options.height:this.$container.height()},getCurrentKey:function(){return this.current},setCurrentKey:function(t){this.current=t},getCurrentSlide:function(){return this.getSlideAtKey(this.getCurrentKey())},getNextKey:function(){var t;return this.direction===i.DIRECTION_REVERSE?(t=this.current-1,0>t&&(t=this.slideCount-1)):(t=this.current+1,t>=this.slideCount&&(t=0)),t},getNthRelativeKey:function(t){var e,n;return this.direction===i.DIRECTION_REVERSE&&(t*=-1),e=this.current+t,0>e&&(n=e+this.slideCount,e=n),e>=this.slideCount&&(n=e-this.slideCount,e=n),e},getPrevKey:function(){var t;return this.direction===i.DIRECTION_REVERSE?(t=this.current+1,t>=this.slideCount&&(t=0)):(t=this.current-1,0>t&&(t=this.slideCount-1)),t},getNextSlide:function(){return this.getSlideAtKey(this.getNextKey())},getPrevSlide:function(){return this.getSlideAtKey(this.getPrevKey())},getSlideAtKey:function(t){return this.$slides.eq(t)},autoplay:function(){var t=this;clearTimeout(this.autoplayTimeout),this.autoplayTimeout=setTimeout(function(){t.trigger("ms.next")},this.options.delay)},stopAutoplay:function(){clearTimeout(this.autoplayTimeout),this.options.autoplay=!1},onStart:function(){this.options.preloadImages&&this.preloadImages(this.$slides.find("img")),this.$container.removeClass("loading"),this.options.onStart.apply(this),this.options.autoplay&&this.autoplay()},onNext:function(){this.transitionToSlide(this.getNextKey())},onPrev:function(){this.transitionToSlide(this.getPrevKey())},transitionToSlide:function(t){var i,e,n,s,o,r=this;t===this.getCurrentKey()||this.animationLock||(this.animationLock=!0,this.direction=this.getDirectionBetweenKeys(this.getCurrentKey(),t),i=this.getCurrentKey(),e=t,n=this.getCurrentSlide(),s=this.getSlideAtKey(t),jQuery.when(this.options.onBeforeTransition.apply(this,[n,s,e])).then(function(){var t=r,h=i,a=e,d=n,u=s;r.highlightIndicator(e),o=r[r.options.transition+"ToSlide"](e),o.then(function(){t.setCurrentKey(a),t.animationLock=!1,t.options.onAfterTransition.apply(t,[d,u,h])})}))},highlightIndicator:function(t){this.$indicators.removeClass(this.options.indicatorActiveClass),this.$indicators.eq(t).addClass(this.options.indicatorActiveClass)},getDirectionBetweenKeys:function(t,e){var n;return n=t>e?i.DIRECTION_REVERSE:i.DIRECTION_FORWARD,0===e&&t>=this.slideCount-1&&(n=i.DIRECTION_FORWARD),0===t&&e>=this.slideCount-1&&(n=i.DIRECTION_REVERSE),n},fadeToSlide:function(t){var i=this,e=new jQuery.Deferred,n=this.getCurrentSlide(),s=this.getSlideAtKey(t);return n.css({zIndex:this.options.zIndexLayer1}),s.hide().css({zIndex:this.options.zIndexLayer2}),s.fadeIn(this.options.fadeInDuration,function(){i.postFade(n,s),e.resolve()}),e},postFade:function(t,i){t.hide().css({zIndex:this.options.inactiveZIndex}),i.css({zIndex:this.options.inactiveZIndex}),this.options.autoplay&&this.autoplay()},slideToSlide:function(t){var e=this,n=this.getDirectionBetweenKeys(this.getCurrentKey(),t),s=new jQuery.Deferred,o=this.getPrevSlide(),r=this.getCurrentSlide(),h=this.getSlideAtKey(t),a=this.getSlideAtKey(this.getNthRelativeKey(2)),d=this.direction===i.DIRECTION_FORWARD?"-=":"+=";return n===i.DIRECTION_FORWARD?(o.css({zIndex:this.options.zIndexLayer1,left:-1*this.width}),r.css({zIndex:this.options.zIndexLayer1,left:0}),h.css({zIndex:this.options.zIndexLayer2,left:this.width}),a.css({zIndex:this.options.zIndexLayer1,left:2*this.width})):(o.css({zIndex:this.options.zIndexLayer1,left:this.width}),r.css({zIndex:this.options.zIndexLayer1,left:0}),h.css({zIndex:this.options.zIndexLayer2,left:-1*this.width}),a.css({zIndex:this.options.zIndexLayer1,left:-2*this.width})),jQuery().add(r).add(h).add(a).add(o).animate({left:d+this.width},{queue:!1,duration:this.options.slideDuration,complete:function(){e.postSlide(r,h,a),s.resolve()}}),o.fadeOut({queue:!1,duration:this.options.slideDuration}),r.fadeTo(this.options.slideDuration,this.options.slideInactiveOpacity),h.fadeTo(this.options.slideDuration,1),a.fadeTo(this.options.slideDuration,this.options.slideInactiveOpacity),s},postSlide:function(){this.options.autoplay&&this.autoplay()},on:function(t,i){this.$container.on(t,i)},trigger:function(t,i){this.$container.trigger(t,i)},bindInteractionEvents:function(){var t=this;this.$nextBtn.click(function(i){return i.preventDefault(),"forward"!==t.direction&&(t.direction="forward"),t.options.interactionDisablesAutoplay&&t.stopAutoplay(),t.trigger("ms.next"),!1}),this.$prevBtn.click(function(i){return i.preventDefault(),"reverse"!==t.direction&&(t.direction="reverse"),t.options.interactionDisablesAutoplay&&t.stopAutoplay(),t.trigger("ms.next"),!1}),this.$indicators.each(function(i){var e=t;jQuery(this).click(function(t){return t.preventDefault(),e.trigger("ms.goTo",[i]),!1})}),this.options.pauseOnClick&&this.$container.click(function(i){return i.preventDefault(),t.trigger("ms.stop"),!1})},bindEvents:function(){var t=this;this.bindInteractionEvents(),this.on("ms.next",jQuery.proxy(this.onNext,this)),this.on("ms.prev",jQuery.proxy(this.onPrev,this)),this.on("ms.goTo",function(i,e){t.stopAutoplay(),t.transitionToSlide(e)}),this.on("ms.start",jQuery.proxy(this.onStart,this)),this.on("ms.stop",jQuery.proxy(this.stopAutoplay,this))},preloadImages:function(t){jQuery(t).each(function(){var t=document.createElement("img");t.src=jQuery(this).attr("src")})}},jQuery.fn.ckslider=function(t){var i=[];return this.each(function(){i.push(new e(this,t))}),i.length>1?i:1===i.length?i[0]:!1}})();