/*! ckSlider - v0.1.0 - 2013-06-14
* https://github.com/ckimrie/ckslider
* Copyright (c) 2013 Christopher Imrie; Licensed MIT */
(function(){var t={fadeInDuration:800,delay:5e3,start:1,transition:"fade",autoplay:!0,preloadImages:!0,inactiveZIndex:1,zIndexLayer1:5,zIndexLayer2:10,zIndexLayer3:15,pauseOnClick:!0,hideInactiveSlides:!0,legacyIEMode:jQuery("html").is(".ie6, .ie7, .ie8"),height:null,width:null,loadingClass:"loading",slideActiveClass:"active",slideClass:"slide",indicatorActiveClass:"active",slideIndicatorWrapper:".counter",slideIndicatorElement:"a",nextBtn:".next",prevBtn:".previous",direction:"forward",onStart:function(){},onBeforeTransition:function(){},onAfterTransition:function(){},onPause:function(){}},i={DIRECTION_FORWARD:"forward",DIRECTION_REVERSE:"reverse"},n=function(i,n){this.options=jQuery.extend({},t,n||{}),this.$container=jQuery(i).eq(0),this.$slides=this.$container.find("."+this.options.slideClass),this.$indicatorContainer=this.$container.find(this.options.slideIndicatorWrapper),this.$indicators=this.$indicatorContainer.find(this.options.slideIndicatorElement),this.$nextBtn=this.$indicatorContainer.find(this.options.nextBtn),this.$prevBtn=this.$indicatorContainer.find(this.options.prevBtn),this.slideCount=this.$slides.length,this.current=this.options.start>0&&this.options.start<this.$slides.length?this.options.start-1:0,this.nextKey=null,this.autoplayTimeout=null,this.direction=this.options.direction,this.animationLock=!1,this.init()};n.prototype={init:function(){this.measureContainerDimensions(),this.setInitialSlidePresentation(),this.bindEvents(),this.trigger("ms.start")},setInitialSlidePresentation:function(){var t=this;this.$container.addClass(this.options.loadingClass).css({height:this.height,position:"relative"}),this.$slides.each(function(i){i!==t.current&&t.options.hideInactiveSlides?jQuery(this).hide():jQuery(this).show(),jQuery(this).css({position:"absolute",height:t.height,width:"100%"})}),this.$indicatorContainer.css({zIndex:this.options.zIndexLayer3}),this.highlightIndicator(this.getCurrentKey())},measureContainerDimensions:function(){this.width=null!==this.options.width?this.options.width:this.$container.width(),this.height=null!==this.options.height?this.options.height:this.$container.height()},getCurrentKey:function(){return this.current},setCurrentKey:function(t){this.current=t},getCurrentSlide:function(){return this.getSlideAtKey(this.getCurrentKey())},getNextKey:function(){var t;return this.direction===i.DIRECTION_REVERSE?(t=this.current-1,0>t&&(t=this.slideCount-1)):(t=this.current+1,t>=this.slideCount&&(t=0)),t},getNthRelativeKey:function(t){var n,e;return this.direction===i.DIRECTION_REVERSE&&(t*=-1),n=this.current+t,0>n&&(e=n+this.slideCount,n=e),n>=this.slideCount&&(e=n-this.slideCount,n=e),n},getPrevKey:function(){var t;return this.direction===i.DIRECTION_REVERSE?(t=this.current+1,t>=this.slideCount&&(t=0)):(t=this.current-1,0>t&&(t=this.slideCount-1)),t},getNextSlide:function(){return this.getSlideAtKey(this.getNextKey())},getPrevSlide:function(){return this.getSlideAtKey(this.getPrevKey())},getSlideAtKey:function(t){return this.$slides.eq(t)},autoplay:function(){var t=this;clearTimeout(this.autoplayTimeout),this.autoplayTimeout=setTimeout(function(){t.trigger("ms.next")},this.options.delay)},stopAutoplay:function(){clearTimeout(this.autoplayTimeout),this.options.autoplay=!1},onStart:function(){this.options.preloadImages&&this.preloadImages(this.$slides.find("img")),this.$container.removeClass("loading"),this.options.onStart.apply(this),this.options.autoplay&&this.autoplay()},onNext:function(){this.transitionToSlide(this.getNextKey())},onPrev:function(){this.transitionToSlide(this.getPrevKey())},transitionToSlide:function(t){var i,n,e,s,o,r=this;t===this.getCurrentKey()||this.animationLock||(this.animationLock=!0,this.direction=this.getDirectionBetweenKeys(this.getCurrentKey(),t),i=this.getCurrentKey(),n=t,e=this.getCurrentSlide(),s=this.getSlideAtKey(t),jQuery.when(this.options.onBeforeTransition.apply(this,[e,s,n])).then(function(){var t=r,h=i,a=n,u=e,c=s;r.highlightIndicator(n),o=r[r.options.transition+"ToSlide"](n),o.then(function(){t.setCurrentKey(a),t.animationLock=!1,t.options.onAfterTransition.apply(t,[u,c,h])})}))},highlightIndicator:function(t){this.$indicators.removeClass(this.options.indicatorActiveClass),this.$indicators.eq(t).addClass(this.options.indicatorActiveClass)},getDirectionBetweenKeys:function(t,n){var e;return e=t>n?i.DIRECTION_REVERSE:i.DIRECTION_FORWARD,0===n&&t>=this.slideCount-1&&(e=i.DIRECTION_FORWARD),0===t&&n>=this.slideCount-1&&(e=i.DIRECTION_REVERSE),e},fadeToSlide:function(t){var i=this,n=new jQuery.Deferred,e=this.getCurrentSlide(),s=this.getSlideAtKey(t);return e.css({zIndex:this.options.zIndexLayer1}),s.hide().css({zIndex:this.options.zIndexLayer2}),s.fadeIn(this.options.fadeInDuration,function(){i.postFade(e,s),n.resolve()}),n},postFade:function(t,i){t.hide().css({zIndex:this.options.inactiveZIndex}),i.css({zIndex:this.options.inactiveZIndex}),this.options.autoplay&&this.autoplay()},on:function(t,i){this.$container.on(t,i)},trigger:function(t,i){this.$container.trigger(t,i)},bindInteractionEvents:function(){var t=this;this.$nextBtn.click(function(i){return i.preventDefault(),t.trigger("ms.next"),!1}),this.$prevBtn.click(function(i){return i.preventDefault(),t.trigger("ms.prev"),!1}),this.$indicators.each(function(i){var n=t;jQuery(this).click(function(t){return t.preventDefault(),n.trigger("ms.goTo",[i]),!1})}),this.options.pauseOnClick&&this.$container.click(function(i){return i.preventDefault(),t.trigger("ms.stop"),!1})},bindEvents:function(){var t=this;this.bindInteractionEvents(),this.on("ms.next",jQuery.proxy(this.onNext,this)),this.on("ms.prev",jQuery.proxy(this.onPrev,this)),this.on("ms.goTo",function(i,n){t.stopAutoplay(),t.transitionToSlide(n)}),this.on("ms.start",jQuery.proxy(this.onStart,this)),this.on("ms.stop",jQuery.proxy(this.stopAutoplay,this))},preloadImages:function(t){jQuery(t).each(function(){var t=document.createElement("img");t.src=jQuery(this).attr("src")})}},jQuery.fn.ckslider=function(t){var i=[];return this.each(function(){i.push(new n(this,t))}),i.length>1?i:1===i.length?i[0]:!1}})();